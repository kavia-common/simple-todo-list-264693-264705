{"is_source_file": true, "format": "TypeScript", "description": "This file defines a custom React hook 'useTodos' for managing a TODO list with local storage persistence. It includes functions for CRUD operations, filtering, searching, and state management related to TODO items.", "external_files": ["./useLocalStorage"], "external_methods": ["useLocalStorage"], "published": ["useTodos"], "classes": [], "methods": [{"name": "export function useTodos() { useTodos", "description": "Main hook managing todos with persistent storage, providing CRUD operations, filtering, searching, and state flags.", "scope": "", "scopeKind": ""}, {"name": "function sanitizeText(input: string, maxLen: number) { sanitizeText", "description": "Sanitizes input text by removing control characters (except newline and tab), trimming, and slicing to a maximum length.", "scope": "", "scopeKind": ""}], "calls": ["useLocalStorage", "setTodos", "setFilter", "setSearch", "JSON.parse", "window.localStorage.getItem", "crypto.randomUUID", "Date.toISOString"], "search-terms": ["useTodos", "localStorage persistence", "todo list management", "React hook", "filter and search"], "state": 2, "file_id": 14, "knowledge_revision": 32, "git_revision": "", "ctags": [{"_type": "tag", "name": "Filter", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^type Filter = \"all\" | \"active\" | \"completed\";$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "NOTE_MAX", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^const NOTE_MAX = 2000;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "TITLE_MAX", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^const TITLE_MAX = 200;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "addTodo", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const addTodo = (title: string, note?: string) => {$/", "language": "TypeScript", "kind": "constant", "scope": "useTodos", "scopeKind": "function"}, {"_type": "tag", "name": "bulkToggle", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const bulkToggle = (completeAll: boolean) => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "cleaned", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const cleaned = input.replace(\\/[^\\\\P{C}\\\\n\\\\t]\\/gu, \"\");$/", "language": "TypeScript", "kind": "constant", "scope": "sanitizeText", "scopeKind": "function"}, {"_type": "tag", "name": "clearCompleted", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const clearCompleted = () => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "deleteTodo", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const deleteTodo = (id: string) => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "filter", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const [filter, setFilter] = useLocalStorage<Filter>(\"todos:filter\", \"all\");$/", "language": "TypeScript", "kind": "constant", "scope": "useTodos", "scopeKind": "function"}, {"_type": "tag", "name": "filteredTodos", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const filteredTodos = useMemo(() => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "moveDown", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const moveDown = (id: string) => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "moveUp", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const moveUp = (id: string) => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "newTodo", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^    const newTodo: Todo = {$/", "language": "TypeScript", "kind": "constant", "scope": "useTodos", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^        const next: Todo = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "now", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^    const now = new Date().toISOString();$/", "language": "TypeScript", "kind": "constant", "scope": "useTodos", "scopeKind": "function"}, {"_type": "tag", "name": "parsedOnce", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const parsedOnce = useRef(false);$/", "language": "TypeScript", "kind": "constant", "scope": "useTodos", "scopeKind": "function"}, {"_type": "tag", "name": "q", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^      const q = search.trim().toLowerCase();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^        const raw = window.localStorage.getItem(\"todos:v1\");$/", "language": "TypeScript", "kind": "constant", "scope": "useTodos", "scopeKind": "function"}, {"_type": "tag", "name": "remainingCount", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const remainingCount = useMemo(() => todos.filter((t) => !t.completed).length, [todos]);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "sanitizeText", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^function sanitizeText(input: string, maxLen: number) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const [search, setSearch] = useState<string>(\"\");$/", "language": "TypeScript", "kind": "constant", "scope": "useTodos", "scopeKind": "function"}, {"_type": "tag", "name": "setFilter", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const [filter, setFilter] = useLocalStorage<Filter>(\"todos:filter\", \"all\");$/", "language": "TypeScript", "kind": "constant", "scope": "useTodos", "scopeKind": "function"}, {"_type": "tag", "name": "setSearch", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const [search, setSearch] = useState<string>(\"\");$/", "language": "TypeScript", "kind": "constant", "scope": "useTodos", "scopeKind": "function"}, {"_type": "tag", "name": "setStorageReset", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const [storageReset, setStorageReset] = useState<boolean>(false);$/", "language": "TypeScript", "kind": "constant", "scope": "useTodos", "scopeKind": "function"}, {"_type": "tag", "name": "setTodos", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const [todos, setTodos] = useLocalStorage<Todo[]>(\"todos:v1\", []);$/", "language": "TypeScript", "kind": "constant", "scope": "useTodos", "scopeKind": "function"}, {"_type": "tag", "name": "storageReset", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const [storageReset, setStorageReset] = useState<boolean>(false);$/", "language": "TypeScript", "kind": "constant", "scope": "useTodos", "scopeKind": "function"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^          title: patch.title !== undefined ? sanitizeText(patch.title, TITLE_MAX) : t.title,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "todos", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const [todos, setTodos] = useLocalStorage<Todo[]>(\"todos:v1\", []);$/", "language": "TypeScript", "kind": "constant", "scope": "useTodos", "scopeKind": "function"}, {"_type": "tag", "name": "toggleTodo", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const toggleTodo = (id: string) => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "updateTodo", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^  const updateTodo = (id: string, patch: Partial<Pick<Todo, \"title\" | \"note\">>) => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "useTodos", "path": "/home/kavia/workspace/code-generation/simple-todo-list-264693-264705/todo_frontend/src/hooks/useTodos.ts", "pattern": "/^export function useTodos() {$/", "language": "TypeScript", "kind": "function"}], "hash": "48bde205180040d481db2f7a5decd0d6", "format-version": 4, "code-base-name": "todo_frontend", "filename": "todo_frontend/src/hooks/useTodos.ts", "revision_history": [{"32": ""}]}